# 第二章

## 2.3  数据结构

### 2.3.1  数组

#### 题3.数组中重复的数字

> 题目(1)  长度为n的数组中所有数字都在0\~n-1的范围内。数组中有重复数字，但不知道有几个重复，但不知道重复的数字重复了多少次找出任意一个重复的数字。

排序是很简单的做法，时间 O(nlogn)

很容易想到用哈希表，空间换时间，时间O(n),空间O(n)

进一步优化：可以利用数组本身能做哈希的特性，直接在原数组用hash(i)=i的方式构造哈希，空间优化到O(1)，时间还是O(n),步骤：

遍历数组nums，做如下操作：

1. 如果 nums\[i] == i,则i相当于已放在哈希表中；遍历下一个；否则2
2. 计nums\[i] = m,因为hash(m) = m,那么m应该存在nums\[m],看nums\[m]是否为m，若为m，则说明m为重复数字，否则交换nums\[i]和nums\[m]，相当于在哈希表中添加了(m,m);对新交换过来的nums\[i],重复上述操作。

> 题目(2)  数组长度n+1,数字范围1\~n,现在不能改数组,又想保证空间复杂度低。

如果还想空间复杂度为O(1)，可以二分查找，由于容斥定理如果遍历数组得到数组中1\~m的数的种类数量小于m那么这组数一定有重复的数。可以先用这个方法，先看1\~n/2中有没有重复的数，若有就再找1\~n/4,否则说明在n/2+1 \~ n中，可在这个范围里继续二分查找。时间复杂度O(nlogn).二分logn,遍历数组计数O(n).
